!function(t){function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var o=e(SpeechSDK);"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var n,i,s=(function(t,e){!function(t,e){function o(t,e){let i,s=t&&t.type;if("FeatureCollection"===s){let n=t;for(i=0;i<n.features.length;i++)o(n.features[i],e)}else if("GeometryCollection"===s){let n=t;for(i=0;i<n.geometries.length;i++)o(n.geometries[i],e)}else if("Feature"===s)o(t.geometry,e);else if("Polygon"===s)n(t.coordinates,e);else if("MultiPolygon"===s){let o=t;for(i=0;i<o.coordinates.length;i++)n(o.coordinates[i],e)}return t}function n(t,e){if(0!==t.length){i(t[0],e);for(let o=1;o<t.length;o++)i(t[o],!e)}}function i(t,e){let o=0;for(let e=0,n=t.length,i=n-1;e<n;i=e++)o+=(t[e][0]-t[i][0])*(t[i][1]+t[e][1]);o>=0!=!!e&&t.reverse()}var s;(s=t.StpMessageLevel||(t.StpMessageLevel={})).Error="Error",s.Warning="Warning",s.Info="Info",s.Debug="Debug";class r{}class a extends r{asGeoJSON(){var t,e,n,i,s,r;if(null==this.location||null==this.location.coords||0==(null===(t=this.location)||void 0===t?void 0:t.coords.length))throw new Error("Coordinates are undefined or empty");let a;if("point"===(null===(e=this.location)||void 0===e?void 0:e.fsTYPE))a={type:"Point",coordinates:[this.location.coords[0].lon,this.location.coords[0].lat]};else if("line"===(null===(n=this.location)||void 0===n?void 0:n.fsTYPE))a={type:"LineString",coordinates:this.location.coords.map((t=>[t.lon,t.lat]))};else if("area"===(null===(i=this.location)||void 0===i?void 0:i.fsTYPE))a={type:"Polygon",coordinates:[this.location.coords.map((t=>[t.lon,t.lat]))]},a=o(a,!1);else{if("multipoint"!==(null===(s=this.location)||void 0===s?void 0:s.fsTYPE))throw new Error('Expected "point", "line", "area", or "multipoint" geometry type. Got: '+(null===(r=this.location)||void 0===r?void 0:r.fsTYPE));a={type:"MultiPoint",coordinates:this.location.coords.map((t=>[t.lon,t.lat]))}}return{type:"Feature",id:this.poid,geometry:a,properties:{symbol:this}}}}var l=function(t,e,o,n){return new(o||(o=Promise))((function(i,s){function r(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(r,a)}l((n=n.apply(t,e||[])).next())}))},c=function(t,e,o,n){return new(o||(o=Promise))((function(i,s){function r(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(r,a)}l((n=n.apply(t,e||[])).next())}))},d=function(t,e,o,n){return new(o||(o=Promise))((function(i,s){function r(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(r,a)}l((n=n.apply(t,e||[])).next())}))};class h{constructor(){this.results=[],this.startTime=new Date,this.endTime=new Date}}class u{constructor(t,e){this.text=t,this.confidence=e}}class p{constructor(){this.RecognitionStatus="",this.Offset=0,this.Duration=0,this.DisplayText="",this.NBest=[]}}t.AzureSpeechRecognizer=class{constructor(t,o,n,i){this.speechSubscriptionKey=t,this.serviceRegion=o;const s=e.SpeechConfig.fromSubscription(this.speechSubscriptionKey,this.serviceRegion);s.outputFormat=e.OutputFormat.Detailed,n&&(s.endpointId=n),this.audioConfig=i||e.AudioConfig.fromDefaultMicrophoneInput(),this.recognizer=new e.SpeechRecognizer(s,this.audioConfig)}recognize(t){return t||(t=8),new Promise(((e,o)=>d(this,void 0,void 0,(function*(){for(let o=0;o<t;o++){const n=new Date;try{const t=yield this.recoOnce(n);return void e(t)}catch(t){}o<t-1&&(yield new Promise((t=>setTimeout(t,250))))}o(new Error("Failed to recognize speech - is a microphone available and enabled?"))}))))}recoOnce(t){return new Promise(((o,n)=>{this.recognizer.recognizeOnceAsync((i=>{switch(i.reason){case e.ResultReason.RecognizedSpeech:let r=new h;r.startTime=this.addTicksToDate(t,i.offset),r.endTime=this.addTicksToDate(r.startTime,i.duration);let a=i.properties.getProperty(e.PropertyId.SpeechServiceResponse_JsonResult);const l=Object.assign(new p,JSON.parse(a)).NBest.map((t=>new u(t.Lexical,t.Confidence)));r.results=Array.from(l);for(let t=0;t<l.length;t++){const e=l[t];if(e.text.search(/^([a-zA-Z]\s)+[a-zA-Z]$/)>=0){const t=e.text.replace(/\s/g,""),o=.9*e.confidence;r.results.push(new u(t,o))}}o(r);break;case e.ResultReason.NoMatch:o(null);break;case e.ResultReason.Canceled:var s=e.CancellationDetails.fromResult(i);n(new Error(e.CancellationReason[s.reason]))}}),(t=>{n(new Error(t))}))}))}addTicksToDate(t,e){let o=1e4*t.getTime()+621355968e9;return new Date((o+e-621355968e9)/1e4)}},t.Interval=class{constructor(t,e){this.start=t,this.end=e}equals(t){return this.start==t.start&&this.end==t.end}},t.LatLon=class{constructor(t,e){this.lat=t,this.lon=e}equals(t){return this.lat==t.lat&&this.lon==t.lon}},t.Location=class{},t.Sidc=class{},t.Size=class{constructor(t,e){this.width=t,this.height=e}equals(t){return this.width==t.width&&this.height==t.height}},t.StpItem=r,t.StpRecognizer=class{constructor(t){this.stpConnector=t,this.serviceName=""}connect(t,e){return l(this,void 0,void 0,(function*(){this.serviceName=t,this.stpConnector.onInform=this.onInform.bind(this),this.stpConnector.onRequest=this.onRequest.bind(this),this.stpConnector.onError=this.onError.bind(this);try{let t=this.buildSolvables();return this.stpConnector.connect(this.serviceName,t,e)}catch(t){throw t}}))}buildSolvables(){return Object.getOwnPropertyNames(this).filter((t=>t.toString().startsWith("on")&&"function"==typeof this[t])).map((t=>t.substring(2)))}onInform(t){let e=JSON.parse(t);this.handleInform(e)}onRequest(t){return this.onInform(t),[]}onError(e){this.onStpMessage&&this.onStpMessage(e,t.StpMessageLevel.Error)}sendPenDown(t,e){return l(this,arguments,void 0,(function*(){this.informStp("SendPenDown",{location:arguments[0],timestamp:arguments[1]})}))}sendInk(t,e,o,n,i,s,r){this.informStp("SendInk",{pixelBoundsWindow:arguments[0],topLeftGeoMap:arguments[1],bottomRightGeoMap:arguments[2],strokePoints:arguments[3],timeStrokeStart:arguments[4],timeStrokeEnd:arguments[5],intersectedPoids:arguments[6]})}sendSpeechRecognition(t,e,o){this.informStp("SendSpeechRecognition",{recoList:arguments[0],startTime:arguments[1],endTime:arguments[2]})}addSymbol(t){this.informStp("AddSymbol",{symbol:arguments[0]})}updateSymbol(t,e){this.informStp("UpdateSymbol",{poid:arguments[0],symbol:arguments[1]})}deleteSymbol(t){this.informStp("DeleteSymbol",{poid:arguments[0]})}chooseAlternate(t,e){this.informStp("ChooseAlternate",{poid:arguments[0],nBestIndex:arguments[1]})}informStp(e,o){try{let t={method:e,params:o};this.stpConnector.inform(JSON.stringify(t))}catch(e){this.onStpMessage&&this.onStpMessage(e.message,t.StpMessageLevel.Error)}}handleInform(t){if("SymbolAdded"===t.method&&this.onSymbolAdded){const e=t.params;let o=[];for(let t=0;t<e.alternates.length;t++){const n=Object.assign(new a,e.alternates[t]);o.push(n)}this.onSymbolAdded(o,e.isUndo)}else if("SymbolModified"===t.method&&this.onSymbolModified){const e=t.params,o=Object.assign(new a,e.symbol);this.onSymbolModified(e.poid,o,e.isUndo)}else if("SymbolDeleted"===t.method&&this.onSymbolDeleted){const e=t.params;this.onSymbolDeleted(e.poid,e.isUndo)}else if("InkProcessed"===t.method&&this.onInkProcessed)this.onInkProcessed();else if("SpeechRecognized"===t.method&&this.onSpeechRecognized){const e=t.params;this.onSpeechRecognized(e.phrases)}else if("StpMessage"===t.method&&this.onStpMessage){const e=t.params;this.onStpMessage(e.message,e.level)}else console.log("Received message with no handler: "+t.method)}},t.StpSymbol=a,t.StpWebSocketsConnector=class{constructor(t){this.DEFAULT_TIMEOUT=30,this.connstring=t,this.socket=null}get isConnected(){return null!=this.socket&&this.socket.readyState===this.socket.OPEN}get isConnecting(){return null!=this.socket&&this.socket.readyState===this.socket.CONNECTING}get connState(){return this.socket?this.socket.readyState.toString():""}connect(t,e,o=this.DEFAULT_TIMEOUT){return c(this,void 0,void 0,(function*(){return new Promise(((n,i)=>c(this,void 0,void 0,(function*(){this.isConnected&&n(),this.serviceName=t,this.solvables=e,o<=0&&(o=this.DEFAULT_TIMEOUT);try{this.socket=yield this.promiseWithTimeout(o,this.tryConnect(this.connstring)),yield this.register(this.serviceName,this.solvables,this.timeout)}catch(t){return void i(new Error("Failed to connect: "+t.message))}this.socket.onmessage=t=>{this.onInform&&this.onInform(t.data)},this.socket.onerror=t=>{this.onError&&this.onError("Error connecting to STP. Check that the service is running and refresh page to retry")},this.socket.onclose=t=>c(this,void 0,void 0,(function*(){if(!this.isConnecting)try{yield this.connect(this.serviceName,this.solvables,this.timeout)}catch(t){this.onError&&this.onError("Lost connection to STP. Check that the service is running and refresh page to retry")}})),n()}))))}))}register(t,e,o=this.DEFAULT_TIMEOUT){if(!this.isConnected)throw new Error("Failed to register: connection is not open ("+this.connState+")");return this.promiseWithTimeout(o,new Promise(((o,n)=>c(this,void 0,void 0,(function*(){this.socket&&(this.name=t,this.socket.send(JSON.stringify({method:"Register",params:{serviceName:this.name,language:"javascript",solvables:e,machineId:this.getUniqueId(9)}})),o())})))))}disconnect(t=this.DEFAULT_TIMEOUT){return this.promiseWithTimeout(t,new Promise(((t,e)=>c(this,void 0,void 0,(function*(){!this.isConnected&&this.socket&&this.socket.close(),t()})))))}inform(t,e=this.DEFAULT_TIMEOUT){if(!this.isConnected)throw new Error("Failed to send inform: connection is not open ("+this.connState+")");return this.promiseWithTimeout(e,new Promise(((e,o)=>c(this,void 0,void 0,(function*(){this.socket&&(this.socket.send(t),e())})))))}request(t,e=this.DEFAULT_TIMEOUT){throw new Error("Method not implemented")}tryConnect(t){return new Promise(((e,o)=>{var n=new WebSocket(t);n.onopen=()=>e(n),n.onerror=t=>o(new Error("Unspecified error communicating with STP"))}))}promiseWithTimeout(t,e){return Promise.race([e,new Promise(((e,o)=>{let n=setTimeout((()=>{clearTimeout(n),o(new Error("Operation timed out"))}),1e3*t)}))])}getUniqueId(t){return t||(t=9),Math.random().toString(36).substr(2,t)}},Object.defineProperty(t,"__esModule",{value:!0})}(e,o.default)}(i={path:n,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&i.path)}},i.exports),i.exports);class r{constructor(t,e=50){this.symbol=t,this.size=e}asGeoJSON(){let t=this.symbol.asGeoJSON(),e=this.getGestureGeometry(this.symbol);t.geometry=e;let o=this.asSVG();return o&&(t.properties.rendering=o),t}asSVG(){var t;if("point"==(null===(t=this.symbol.location)||void 0===t?void 0:t.fsTYPE)){return[this.pointSVG(this.symbol)]}return null}getGestureGeometry(t){var e,o,n,i,r,a,l;if(null==t.location||null==t.location||null==t.location.coords||0==t.location.coords.length||null==t.location.centroid)throw new Error("Symbol does not have location information");let c;if("point"==t.location.shape)c={type:"Point",coordinates:[t.location.centroid.lon,t.location.centroid.lat]};else if(c=this.toLineString(t.location.coords),null!=(null===(e=t.location)||void 0===e?void 0:e.shape)&&(null===(o=t.location)||void 0===o?void 0:o.shape.includes("arrowfat"))){let e=t.location.coords.slice(0,t.location.coords.length-1).reverse();e.push(t.location.coords[t.location.coords.length-1]),c=this.toLineString(e)}else if("ubend"==(null===(n=t.location)||void 0===n?void 0:n.shape)){let e=[t.location.coords[0],t.location.coords[2],t.location.coords[3],t.location.coords[1]];c=this.toLineString(e)}else if("ubendthreepoints"==(null===(i=t.location)||void 0===i?void 0:i.shape)){let e=new s.LatLon(t.location.coords[1].lat,t.location.coords[2].lon),o=[t.location.coords[0],t.location.coords[2],e,t.location.coords[1]];c=this.toLineString(o)}else if("vee"==(null===(r=t.location)||void 0===r?void 0:r.shape)){let e=[t.location.coords[1],t.location.coords[0],t.location.coords[2]];c=this.toLineString(e)}else"opencircle"==(null===(a=t.location)||void 0===a?void 0:a.shape)||"multipoint"==(null===(l=t.location)||void 0===l?void 0:l.shape)&&(c={type:"MultiPoint",coordinates:t.location.coords.map((t=>[t.lon,t.lat]))});return c}pointSVG(t){if(null==t.location||null==t.location||null==t.location.centroid)throw new Error("Point symbol does not have a defined centroid");let e,o,n,i,s,r=0,a="";const l=1.42;if("friend"===t.affiliation)i=this.size-2,s=this.size/l-2,e="rect",o='width="'+i+'" height="'+s+'" ',n="#80e0ff";else if("hostile"===t.affiliation){let t=this.size/l-2;i=s=t*Math.SQRT2,e="rect",o='width="'+t+'" height="'+t+'" ',n="#ff8080",r=45,a='transform="translate('+i/2+" 0) rotate("+r+')" '}else"neutral"===t.affiliation?(i=s=this.size/l-2,e="rect",o='width="'+i+'" height="'+s+'" ',n="#aaffaa"):(i=s=this.size/l-2,e="circle",o='cx="'+i/2+'" cy="'+s/2+'" r="'+i/2+'" ',n="#ffff80");let c,d='<svg xmlns="http://www.w3.org/2000/svg" version="1.2" baseProfile="tiny" width="'+i+'" height="'+s+'" viewBox="0 0 '+i+" "+s+'" > <'+e+" "+o+' stroke="black" stoke-width="1" fill="'+n+'" '+a+"/></svg>";if(r>0){const t=this.getTransform(d,e);c=[this.applyTransform(t,{x:0,y:0}),this.applyTransform(t,{x:i,y:0}),this.applyTransform(t,{x:i,y:s}),this.applyTransform(t,{x:0,y:s})]}else c=[{x:0,y:0},{x:i,y:0},{x:i,y:s},{x:0,y:s}];return{type:"icon",title:t.description,topLeft:t.location.centroid,bottomRight:t.location.centroid,position:t.location.centroid,svg:btoa(d),shape:c,anchor:{x:i/2,y:s/2}}}getTransform(t,e){let o=document.createElement("div");document.body.appendChild(o),o.setAttribute("style","position:absolute; padding:0; margin:0;visibility:hidden; width:0; height:0"),o.insertAdjacentHTML("beforeend",t);let n=o.querySelector(e),i=null==n?void 0:n.getCTM();return document.body.removeChild(o),i?[i.a,i.b,i.c,i.d,i.e,i.f]:[1,0,0,1,0,0]}toLineString(t){return{type:"LineString",coordinates:t.map((t=>[t.lon,t.lat]))}}applyTransform(t,e){return{x:e.x*t[0]+e.y*t[2]+t[4],y:e.x*t[1]+e.y*t[3]+t[5]}}}var a=function(t,e,o,n){return new(o||(o=Promise))((function(i,s){function r(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(r,a)}l((n=n.apply(t,e||[])).next())}))};class l{constructor(t,e,o,n){this.apiKey=t,this.mapDivId=e,this.mapCenter=o,this.zoomLevel=n,this.strokeStart=this.strokeEnd="",this.assets=new Map}load(){return a(this,void 0,void 0,(function*(){const t="https://maps.googleapis.com/maps/api/js?key="+this.apiKey;document.querySelectorAll('[src="'+t+'"]').length?yield this.initMap():document.body.appendChild(Object.assign(document.createElement("script"),{type:"text/javascript",src:t,onload:()=>a(this,void 0,void 0,(function*(){return yield this.initMap()}))}))}))}initMap(){return a(this,void 0,void 0,(function*(){const t=document.getElementById(this.mapDivId);if(!t)throw new Error("Html page must contain a 'map' div");this.map=new google.maps.Map(t,{zoom:this.zoomLevel,center:{lat:this.mapCenter.lat,lng:this.mapCenter.lon},gestureHandling:"cooperative",draggable:!0,draggableCursor:"crosshair"}),this.map.data.setStyle((t=>{let e=t.getProperty("rendering");if(e){for(let o=0;o<e.length;o++){let n=e[o].shape.map((t=>[t.x,t.y])).flat(),i=new google.maps.Marker({map:this.map,icon:{url:"data:image/svg+xml;charset=UTF-8;base64,"+e[o].svg,anchor:new google.maps.Point(e[o].anchor.x,e[o].anchor.y)},shape:{type:"poly",coords:n},position:{lat:e[o].position.lat,lng:e[o].position.lon}});e[o].title&&i.setTitle(e[o].title),i.addListener("click",(()=>{var e;null===(e=this.onSelection)||void 0===e||e.call(this,t.getProperty("symbol"))}));let s=t.getProperty("symbol").poid;this.assets.has(s)?this.assets.get(s).push(i):this.assets.set(s,[i])}return{visible:"Point"!=t.getGeometry().getType()}}return{visible:!0}})),this.map.data.addListener("click",(t=>{var e;null===(e=this.onSelection)||void 0===e||e.call(this,t.feature.getProperty("symbol"))})),this.map.addListener("mousedown",(t=>{var e;if(t.domEvent.ctrlKey)return!1;t.domEvent.preventDefault(),this.enableDrawing(),null===(e=this.onStrokeStart)||void 0===e||e.call(this,new s.LatLon(t.latLng.lat(),t.latLng.lng()),this.getIsoTimestamp()),this.drawFreeHand(t.latLng)}))}))}drawFreeHand(t){this.strokeStart=this.getIsoTimestamp(),this.clearInk(),this.strokePoly=new google.maps.Polyline({map:this.map,clickable:!1,strokeColor:"#8B0000",strokeWeight:2}),this.strokePoly.getPath().push(t),this.moveListener=google.maps.event.addListener(this.map,"mousemove",(t=>{this.strokePoly.getPath().push(t.latLng)})),google.maps.event.addListenerOnce(this.map,"mouseup",(t=>{this.strokeEnd=this.getIsoTimestamp(),this.moveListener&&google.maps.event.removeListener(this.moveListener),this.enableDragZoom();let e=this.strokePoly.getPath();1==e.getLength()&&e.push(e.getAt(0));let o=e.getArray().map((t=>new s.LatLon(t.lat(),t.lng()))),n={width:document.getElementById("map").clientWidth,height:document.getElementById("map").clientHeight},i=this.map.getBounds();if(!i)throw new Error("Failed to retrieve the map bounds - unable to send ink to STP");this.onStrokeCompleted&&this.onStrokeCompleted(new s.Size(n.width,n.height),new s.LatLon(i.getNorthEast().lat(),i.getSouthWest().lng()),new s.LatLon(i.getSouthWest().lat(),i.getNorthEast().lng()),o,this.strokeStart,this.strokeEnd,[])}))}enableDrawing(){this.map.setOptions({draggable:!1,zoomControl:!1,scrollwheel:!1,disableDoubleClickZoom:!1})}enableDragZoom(){this.map.setOptions({draggable:!0,zoomControl:!0,scrollwheel:!0,disableDoubleClickZoom:!0})}addFeature(t){t&&this.map.data.addGeoJson(t)}removeFeature(t){let e=this.map.data.getFeatureById(t);if(e){if(this.assets.has(t)){let e=this.assets.get(t);for(let t=0;t<e.length;t++)e[t].setMap(null)}this.map.data.remove(e)}}displayInfo(t,e,o){let n=document.createElement("div");n.innerHTML=t;let i={lat:e.lat,lng:e.lon},s=new google.maps.InfoWindow({content:n,position:i});if(s&&o&&o.length)for(let t=0;t<o.length;t++){let e=n.querySelector(o[t].selector);e&&o[t].handler&&google.maps.event.addDomListener(e,"click",(e=>{o[t].closeInfo&&s.close(),o[t].handler(e)}))}s.open(this.map)}clearInk(){var t;null===(t=this.strokePoly)||void 0===t||t.setMap(null)}getBounds(){return this.map.getBounds()}getIsoTimestamp(){return(new Date).toISOString()}}var c=function(t,e,o,n){return new(o||(o=Promise))((function(i,s){function r(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(r,a)}l((n=n.apply(t,e||[])).next())}))};const d="<Enter your Azure Speech subscription key here>",h="<Enter Azure's subscription region>",u="<Enter your Google Maps API key here>",p=new s.LatLon(58.967774948,11.196062412),m="ws://<STP server>:<STP port>";let g,f;function y(t,e,o){o&&alert(t);let n=document.getElementById("messages");if(!n)throw new Error("Html page must contain a 'messages' div");n.innerHTML=t,n.style.color="Error"===e?"red":"black"}window.onload=()=>function(){return c(this,void 0,void 0,(function*(){const t=new URLSearchParams(window.location.search),e=t.get("lat"),o=t.get("lon"),n=e&&o?new s.LatLon(parseFloat(e),parseFloat(o)):p,i=t.get("zoom"),a=i?parseInt(i):13,v=t.get("stpurl"),S=v||m,w=new s.StpWebSocketsConnector(S);g=new s.StpRecognizer(w),g.onSymbolAdded=(t,e)=>{let o=new r(t[0]).asGeoJSON();f.addFeature(o)},g.onSymbolModified=(t,e,o)=>{f.removeFeature(t);let n=new r(e).asGeoJSON();f.addFeature(n)},g.onSymbolDeleted=(t,e)=>{f.removeFeature(t)},g.onInkProcessed=()=>{f.clearInk()},g.onSpeechRecognized=t=>{let e="";t&&t.length>0&&(e=t[0]),y(e)},g.onStpMessage=(t,e)=>{y(t,e,!0)};try{yield g.connect("GoogleMapsSample",10)}catch(t){return void y("Failed to connect to STP at "+S+". \nSymbols will not be recognized. Please reload to try again",s.StpMessageLevel.Error,!0)}f=new l(u,"map",n,a),f.onStrokeStart=(t,e)=>{g.sendPenDown(t,e),function(){c(this,void 0,void 0,(function*(){try{const t=new s.AzureSpeechRecognizer(d,h,null);let e=yield t.recognize();e&&(g.sendSpeechRecognition(e.results,e.startTime,e.endTime),e.results&&e.results.length>0&&y(e.results[0].text))}catch(t){y("Failed to process speech: "+t.message)}}))}()},f.onStrokeCompleted=(t,e,o,n,i,s,r)=>{g.sendInk(t,e,o,n,i,s,r)},f.onSelection=t=>{let e=function(t){var e,o,n,i;if(!t||!t.location||!t.location.centroid)return null;let s='<h3 id="firstHeading" class="firstHeading">'+t.fullDescription+"</h3><table><tr><td>2525D PartA</td><td>"+(null===(e=t.sidc)||void 0===e?void 0:e.partA)+"</td></tr><tr><td>2525D PartB</td><td>"+(null===(o=t.sidc)||void 0===o?void 0:o.partB)+"</td></tr><tr><td>Symbol Set</td><td>"+(null===(n=t.sidc)||void 0===n?void 0:n.symbolSet)+"</td></tr><tr><td>2525C SIDC</td><td>"+(null===(i=t.sidc)||void 0===i?void 0:i.legacy)+"</td></tr><tr><td>Affiliation</td><td>"+t.affiliation+"</td></tr>";"unit"==t.fsTYPE&&(s+="<tr><td>Echelon</td><td>"+t.echelon+"</td></tr>");s+="<tr><td>Parent Unit</td><td>"+t.parent+"</td></tr><tr><td>Designator 1</td><td>"+t.designator1+"</td></tr><tr><td>Designator 2</td><td>"+t.designator2+"</td></tr><tr><td>Status</td><td>"+t.status+"</td></tr>","unit"==t.fsTYPE&&(s+="<tr><td>Modifier</td><td>"+t.modifier+"</td></tr><tr><td>Strength</td><td>"+t.strength+"</td></tr>");return s+="<tr><td>Time From</td><td>"+t.timeFrom+"</td></tr><tr><td>Time To</td><td>"+t.timeTo+"</td></tr><tr><td>Altitude</td><td>"+t.altitude+"</td></tr><tr><td>Min Altitude</td><td>"+t.minAltitude+"</td></tr><tr><td>Max Altitude</td><td>"+t.maxAltitude+'</td></tr><tr><td><button id="delButton">Delete</button></td></tr></table>',s}(t);e&&t&&t.poid&&t.location&&t.location.centroid&&f.displayInfo(e,t.location.centroid,[{selector:"#delButton",handler:e=>{g.deleteSymbol(t.poid)},closeInfo:!0}])},f.load()}))}()}();